name: Nightly Deployment Workflow

on:
  schedule:
    - cron: "0 0 * * *"  # Runs nightly at midnight UTC
  workflow_dispatch:

jobs:
  nightly-deployment:
    runs-on: ubuntu-latest

    env:
      AWS_REGION: us-east-1
      IMAGE_TAG: latest
      SOURCE_REPO: https://github.com/satya-sh/DevOps_Midterm_Source.git

    steps:
      # 1) Check out this (Infra) repo
      - name: Checkout Infra Repo
        uses: actions/checkout@v4

      # 2) Check out your Source Repo
      - name: Checkout Source Repo
        uses: actions/checkout@v4
        with:
          repository: "satya-sh/DevOps_Midterm_Source"
          path: "source"  # Directory where the repo will be cloned